<p>For each positive integer <img src="//latex.artofproblemsolving.com/1/7/4/174fadd07fd54c9afe288e96558c92e0c1da733a.png" class="latex" alt="$n$" width="10" height="8" />, let <img src="//latex.artofproblemsolving.com/0/9/6/0965bf432b818b46740e3cd4d042899628c7ad0e.png" class="latex" alt="$S(n)$" style="vertical-align: -4px" width="35" height="18" /> denote the sum of the digits of <img src="//latex.artofproblemsolving.com/b/d/9/bd923e41635af40a1abe58f230732f2280b0723a.png" class="latex" alt="$n.$" width="14" height="8" /> For how many values of <img src="//latex.artofproblemsolving.com/1/7/4/174fadd07fd54c9afe288e96558c92e0c1da733a.png" class="latex" alt="$n$" width="10" height="8" /> is <img src="//latex.artofproblemsolving.com/5/b/e/5bef803263cb1ce266ce9c3a06b48fbfd31ddc38.png" class="latex" alt="$n + S(n) + S(S(n)) = 2007?$" style="vertical-align: -4px" width="224" height="18" /> 
</p><p><img src="//latex.artofproblemsolving.com/3/e/f/3ef25b0f1a03505d9a6c329cce308510a4d6d444.png" class="latex" alt="$\mathrm{(A)}\ 1 \qquad \mathrm{(B)}\ 2 \qquad \mathrm{(C)}\ 3 \qquad \mathrm{(D)}\ 4 \qquad \mathrm{(E)}\ 5$" style="vertical-align: -4px" width="342" height="18" />
</p>
<h2><span class="mw-headline" id="Solution_1">Solution 1</span></h2>
<p>For the sake of notation, let <img src="//latex.artofproblemsolving.com/5/2/0/5203df592e3d19fca5c239b8f28dd2bdd2d59fe0.png" class="latex" alt="$T(n) = n + S(n) + S(S(n))$" style="vertical-align: -4px" width="217" height="18" />. Obviously <img src="//latex.artofproblemsolving.com/0/b/b/0bb83a2f8cddd789fdc0de28670b869843094392.png" class="latex" alt="$n&lt;2007$" style="vertical-align: 0px" width="71" height="13" />. Then the maximum value of <img src="//latex.artofproblemsolving.com/0/2/0/020746ad79fa19d1fba2fc508e623aafb496e3e7.png" class="latex" alt="$S(n) + S(S(n))$" style="vertical-align: -4px" width="121" height="18" /> is when <img src="//latex.artofproblemsolving.com/a/b/d/abd4f7a1059eb6f7423946b543e871ac55d3183c.png" class="latex" alt="$n = 1999$" style="vertical-align: 0px" width="70" height="13" />, and the sum becomes <img src="//latex.artofproblemsolving.com/0/7/5/075fa160d42988f2f13ef70efe26c832097921ba.png" class="latex" alt="$28 + 10 = 38$" style="vertical-align: -1px" width="100" height="14" />. So the minimum bound is <img src="//latex.artofproblemsolving.com/5/c/3/5c38811df6141ccd82182455d35bb96ae30f697e.png" class="latex" alt="$1969$" style="vertical-align: 0px" width="35" height="13" />. We do <a href="/wiki/index.php/Casework" title="Casework">casework</a> upon the tens digit:
</p><p>Case 1: <img src="//latex.artofproblemsolving.com/3/5/c/35cec661f982b57e6a4303aa376b55f9de15e72b.png" class="latex" alt="$196u \Longrightarrow u = 9$" style="vertical-align: 0px" width="120" height="13" />. Easy to directly disprove.
</p><p>Case 2: <img src="//latex.artofproblemsolving.com/b/3/5/b35bbc68c7bb82eb2fe422b1e0762cb541aaceef.png" class="latex" alt="$197u$" style="vertical-align: 0px" width="37" height="13" />. <img src="//latex.artofproblemsolving.com/9/5/d/95dfc6aa313b3c1bb5eaf90ef78e3bc994321379.png" class="latex" alt="$S(n) = 1 + 9 + 7 + u = 17 + u$" style="vertical-align: -4px" width="240" height="18" />, and <img src="//latex.artofproblemsolving.com/8/6/4/864e36c274bc563bccfc995777d90cb86ca2cdfb.png" class="latex" alt="$S(S(n)) = 8+u$" style="vertical-align: -4px" width="129" height="18" /> if <img src="//latex.artofproblemsolving.com/e/3/d/e3d4fa8a8973bb542049ffe7a1adbcc99443f620.png" class="latex" alt="$u \le 2$" style="vertical-align: -2px" width="43" height="14" /> and <img src="//latex.artofproblemsolving.com/b/4/7/b471ed87845cbeed1062e930605812c75ad3e5f9.png" class="latex" alt="$S(S(n)) = 2 + (u-3) = u-1$" style="vertical-align: -4px" width="240" height="18" /> otherwise. 
</p>
<dl><dd>Subcase a: <img src="//latex.artofproblemsolving.com/6/a/0/6a09cf8aa0c90923a082582cdd9f710b5f5b5ab2.png" class="latex" alt="$T(n) = 1970 + u + 17 + u + 8 + u = 1995 + 3u = 2007 \Longrightarrow u = 4$" style="vertical-align: -4px" width="514" height="18" />. This exceeds our bounds, so no solution here.</dd>
<dd>Subcase b: <img src="//latex.artofproblemsolving.com/0/2/9/0294af35f6aee4545d2fa9b8aaccda2a54f6daf5.png" class="latex" alt="$T(n) = 1970 + u + 17 + u + u - 1 = 1986 + 3u = 2007 \Longrightarrow u = 7$" style="vertical-align: -4px" width="514" height="18" />. First solution.</dd></dl>
<p>Case 3: <img src="//latex.artofproblemsolving.com/d/9/5/d95c1e321ad22c8b00682f7ccfac375bf948998e.png" class="latex" alt="$198u$" style="vertical-align: 0px" width="37" height="13" />. <img src="//latex.artofproblemsolving.com/b/1/6/b168b00ba1d3745595118a907f1e641b40fd291e.png" class="latex" alt="$S(n) = 18 + u$" style="vertical-align: -4px" width="112" height="18" />, and <img src="//latex.artofproblemsolving.com/a/e/e/aeef6091a8b7039badd38b74ade533a24bd3c2f5.png" class="latex" alt="$S(S(n)) = 9 + u$" style="vertical-align: -4px" width="129" height="18" /> if <img src="//latex.artofproblemsolving.com/8/4/3/843896218f207abaf301924a4fed8ba5a7318eb4.png" class="latex" alt="$u \le 1$" style="vertical-align: -2px" width="42" height="14" /> and <img src="//latex.artofproblemsolving.com/e/d/d/eddeefcbc15826282f55093cba2c544ad258d919.png" class="latex" alt="$2 + (u-2) = u$" style="vertical-align: -4px" width="121" height="18" /> otherwise.
</p>
<dl><dd>Subcase a: <img src="//latex.artofproblemsolving.com/1/c/6/1c6be130912d2d095bd1b1acf8055091036be2bb.png" class="latex" alt="$T(n) = 1980 + u + 18 + u + 9 + u = 2007 + 3u = 2007 \Longrightarrow u = 0$" style="vertical-align: -4px" width="514" height="18" />. Second solution.</dd>
<dd>Subcase b: <img src="//latex.artofproblemsolving.com/a/d/8/ad82999076330c37ac201ad35c8f51891bcb6928.png" class="latex" alt="$T(n) = 1980 + u + 18 + u + u = 1998 + 3u = 2007 \Longrightarrow u = 3$" style="vertical-align: -4px" width="482" height="18" />. Third solution.</dd></dl>
<p>Case 4: <img src="//latex.artofproblemsolving.com/a/a/6/aa6ba997510cdaf83ca8a67aa281437dff8f4f28.png" class="latex" alt="$199u$" style="vertical-align: 0px" width="37" height="13" />. But <img src="//latex.artofproblemsolving.com/8/e/c/8ec6734b0a2b963657daaa3b400d9ad56d4a666b.png" class="latex" alt="$S(n) &gt; 19$" style="vertical-align: -4px" width="79" height="18" />, and <img src="//latex.artofproblemsolving.com/5/4/1/541416c230935da63a78be6b585b5033a7b44803.png" class="latex" alt="$n + S(n)$" style="vertical-align: -4px" width="69" height="18" /> clearly sum to <img src="//latex.artofproblemsolving.com/d/0/d/d0d798fb1547d454b871ce1bf915b28ce514c0ba.png" class="latex" alt="$&gt; 2007$" style="vertical-align: 0px" width="55" height="13" />.
</p><p>Case 5: <img src="//latex.artofproblemsolving.com/e/7/c/e7c213b274a1af69198a1cfda4b71dd0172c9463.png" class="latex" alt="$200u$" width="37" height="12" />. So <img src="//latex.artofproblemsolving.com/7/f/1/7f18ce6654266bea79926ca533f18f82dec1c05f.png" class="latex" alt="$S(n) = 2 + u$" style="vertical-align: -4px" width="103" height="18" /> and <img src="//latex.artofproblemsolving.com/7/d/1/7d19a3af6eec32f6494e713ad53ac29f137899e8.png" class="latex" alt="$S(S(n)) = 2 + u$" style="vertical-align: -4px" width="129" height="18" /> (recall that <img src="//latex.artofproblemsolving.com/5/0/a/50a13508a3d2d76a482dafa762f06992bab165a1.png" class="latex" alt="$n &lt; 2007$" style="vertical-align: 0px" width="71" height="13" />), and <img src="//latex.artofproblemsolving.com/3/9/e/39e27247e188d0f5b3f23588eb3abb1bd86f74a1.png" class="latex" alt="$2000 + u + 2 + u + 2 + u = 2004 + 3u = 2007 \Longrightarrow u = 1$" style="vertical-align: -1px" width="442" height="14" />. Fourth solution.
</p><p>In total we have <img src="//latex.artofproblemsolving.com/c/9/6/c96661f540d39fb52a513b4a3810c7658ef1bbd3.png" class="latex" alt="$4 \mathrm{(D)}$" style="vertical-align: -4px" width="35" height="18" /> solutions, which are <img src="//latex.artofproblemsolving.com/5/a/7/5a7831b1c6475d6f2659d54f780f2009aefad000.png" class="latex" alt="$1977, 1980, 1983,$" style="vertical-align: -3px" width="129" height="16" /> and <img src="//latex.artofproblemsolving.com/d/e/7/de7e2da81334aad3aeeb09706fed72248196613b.png" class="latex" alt="$2001$" style="vertical-align: 0px" width="35" height="13" />.
</p>
<h2><span class="mw-headline" id="Solution_2">Solution 2</span></h2>
<p>Clearly, <img src="//latex.artofproblemsolving.com/a/e/1/ae14bf55c94c650695e3c612f230762329ab069d.png" class="latex" alt="$n &gt; 1950$" style="vertical-align: 0px" width="70" height="13" />. We can break this into three cases:
</p><p>Case 1: <img src="//latex.artofproblemsolving.com/f/2/2/f22b23cbe33c00758633902813fbfe490fea1956.png" class="latex" alt="$n \geq 2000$" style="vertical-align: -2px" width="70" height="15" />
</p>
<dl><dd>Inspection gives <img src="//latex.artofproblemsolving.com/b/7/e/b7e29d1db3f7454539695944f2ff6796f0310462.png" class="latex" alt="$n = 2001$" style="vertical-align: 0px" width="70" height="13" />.</dd></dl>
<p>Case 2: <img src="//latex.artofproblemsolving.com/8/f/0/8f0d32670e195f3dbe89b905bf1d1ecb85d568e0.png" class="latex" alt="$n &lt; 2000$" style="vertical-align: 0px" width="70" height="13" />, <img src="//latex.artofproblemsolving.com/a/d/a/adac2f8fe92ddf95b9cd17f087c28a4d8fe74953.png" class="latex" alt="$n = \overline{19xy}$" style="vertical-align: -3px" width="73" height="18" />
</p>
<dl><dd>If you set up an equation, it reduces to</dd></dl>
<p><img src="//latex.artofproblemsolving.com/a/a/6/aa65cace801c30077adec4e02c4de85f62d9848a.png" class="latex" alt="$4x + y = 32$" style="vertical-align: -3px" width="93" height="16" />
</p>
<dl><dd>which has as its only solution satisfying the constraints <img src="//latex.artofproblemsolving.com/6/2/4/62434ae80ca145c20f0fbc7563f5151371ed163c.png" class="latex" alt="$x = 8$" width="43" height="12" />, <img src="//latex.artofproblemsolving.com/7/a/0/7a06334068417b1781d14e8b28af827907961eb3.png" class="latex" alt="$y = 0$" style="vertical-align: -3px" width="42" height="16" />.</dd></dl>
<p>Case 3: <img src="//latex.artofproblemsolving.com/8/f/0/8f0d32670e195f3dbe89b905bf1d1ecb85d568e0.png" class="latex" alt="$n &lt; 2000$" style="vertical-align: 0px" width="70" height="13" />, <img src="//latex.artofproblemsolving.com/a/d/a/adac2f8fe92ddf95b9cd17f087c28a4d8fe74953.png" class="latex" alt="$n = \overline{19xy}$" style="vertical-align: -3px" width="73" height="18" />, <img src="//latex.artofproblemsolving.com/5/8/d/58d08229f2b9f788621097b22c6ceaca164aedac.png" class="latex" alt="$x + y \geq 10$" style="vertical-align: -3px" width="84" height="16" />
</p>
<dl><dd>This reduces to</dd></dl>
<dl><dd><img src="//latex.artofproblemsolving.com/b/7/0/b70b35702f856831f7492f544384d77e851888a6.png" class="latex" alt="$4x + y = 35$" style="vertical-align: -3px" width="93" height="16" />. The only two solutions satisfying the constraints for this equation are <img src="//latex.artofproblemsolving.com/6/2/d/62d1e7375e601943b3bb958a24e41da8920d601a.png" class="latex" alt="$x = 7$" width="43" height="12" />, <img src="//latex.artofproblemsolving.com/0/2/b/02b1f71c2ba9b8d1f01c2a402a84ebfefd59f6cc.png" class="latex" alt="$y = 7$" style="vertical-align: -3px" width="43" height="15" /> and <img src="//latex.artofproblemsolving.com/6/2/4/62434ae80ca145c20f0fbc7563f5151371ed163c.png" class="latex" alt="$x = 8$" width="43" height="12" />, <img src="//latex.artofproblemsolving.com/6/3/8/6389a3877e2c9d09826aa0c5e5aa564d8c355afa.png" class="latex" alt="$y = 3$" style="vertical-align: -3px" width="42" height="16" />.</dd></dl>
<p>The solutions are thus <img src="//latex.artofproblemsolving.com/6/f/4/6f44b9386568fc9ec6a27f2c265e04038250dc6e.png" class="latex" alt="$1977, 1980, 1983, 2001$" style="vertical-align: -3px" width="168" height="16" /> and the answer is <img src="//latex.artofproblemsolving.com/f/2/0/f20bf5cc0a72e212074ecc61624588676d775c74.png" class="latex" alt="$\mathrm{(D)}\  4$" style="vertical-align: -4px" width="42" height="18" />.
</p>
