<p>Let <img src="//latex.artofproblemsolving.com/8/c/3/8c325612684d41304b9751c175df7bcc0f61f64f.png" class="latex" alt="$k$" width="9" height="12" /> be a positive integer. Bernardo and Silvia take turns writing and erasing numbers on a blackboard as follows: Bernardo starts by writing the smallest perfect square with <img src="//latex.artofproblemsolving.com/f/0/5/f05f085f774fc8ab50676b778b86a1f1d1114fc8.png" class="latex" alt="$k+1$" style="vertical-align: -1px" width="40" height="14" /> digits. Every time Bernardo writes a number, Silvia erases the last <img src="//latex.artofproblemsolving.com/8/c/3/8c325612684d41304b9751c175df7bcc0f61f64f.png" class="latex" alt="$k$" width="9" height="12" /> digits of it. Bernardo then writes the next perfect square, Silvia erases the last <img src="//latex.artofproblemsolving.com/8/c/3/8c325612684d41304b9751c175df7bcc0f61f64f.png" class="latex" alt="$k$" width="9" height="12" /> digits of it, and this process continues until the last two numbers that remain on the board differ by at least 2. Let <img src="//latex.artofproblemsolving.com/8/1/2/81232ecd8d9e4b5c0f24a00dabec238068f26de9.png" class="latex" alt="$f(k)$" style="vertical-align: -4px" width="33" height="18" /> be the smallest positive integer not written on the board. For example, if <img src="//latex.artofproblemsolving.com/0/0/f/00fab47c0b9d0ce398d03e57d6720129d53434f2.png" class="latex" alt="$k = 1$" style="vertical-align: 0px" width="42" height="13" />, then the numbers that Bernardo writes are <img src="//latex.artofproblemsolving.com/0/e/4/0e4f6a90483b7949565008cb877512986bcb1ff8.png" class="latex" alt="$16, 25, 36, 49, 64$" style="vertical-align: -3px" width="123" height="16" />, and the numbers showing on the board after Silvia erases are <img src="//latex.artofproblemsolving.com/0/7/f/07f55e0a11e29af7baee666c19c147e6f7c1923e.png" class="latex" alt="$1, 2, 3, 4,$" style="vertical-align: -3px" width="64" height="16" /> and <img src="//latex.artofproblemsolving.com/6/0/1/601a7806cbfad68196c43a4665871f8c3186802e.png" class="latex" alt="$6$" width="8" height="12" />, and thus <img src="//latex.artofproblemsolving.com/a/2/2/a22f6405c1c72aebf957a80c93b78f7f1b1fc0b0.png" class="latex" alt="$f(1) = 5$" style="vertical-align: -4px" width="67" height="18" />. What is the sum of the digits of <img src="//latex.artofproblemsolving.com/d/9/f/d9fb93f1a677256c3f9eb92751004696a329006f.png" class="latex" alt="$f(2) + f(4)+ f(6) + \dots + f(2016)$" style="vertical-align: -4px" width="271" height="18" />?
</p><p><img src="//latex.artofproblemsolving.com/c/f/a/cfad07e13721f0129058b84833023ca5ddfe1d2b.png" class="latex" alt="$\textbf{(A)}\ 7986\qquad\textbf{(B)}\ 8002\qquad\textbf{(C)}\ 8030\qquad\textbf{(D)}\ 8048\qquad\textbf{(E)}\ 8064$" style="vertical-align: -4px" width="485" height="17" />
</p>
<h2><span class="mw-headline" id="Solution">Solution</span></h2>
<p>Consider <img src="//latex.artofproblemsolving.com/5/6/2/562a91083e33775cdf050ea94f9e84d78a9c071c.png" class="latex" alt="$f(2)$" style="vertical-align: -4px" width="32" height="18" />. The numbers left on the blackboard will show the hundreds place at the end. In order for the hundreds place to differ by 2, the difference between two perfect squares needs to be at least <img src="//latex.artofproblemsolving.com/e/5/9/e59e2c6e83eb78cca610a5fd4070ae01c8d4ae60.png" class="latex" alt="$100$" style="vertical-align: 0px" width="26" height="13" />. Since <img src="//latex.artofproblemsolving.com/8/5/0/850a610161e573f3b65d2346b60754edf7f1a483.png" class="latex" alt="$100\le (x+1)^2-x^2=2x+1$" style="vertical-align: -5px" width="232" height="21" />, this first happens at <img src="//latex.artofproblemsolving.com/2/3/c/23cbf1973af355a5ac037b23370eb3a0dcd19540.png" class="latex" alt="$x\ge \lfloor 99/2\rfloor = 50$" style="vertical-align: -5px" width="131" height="20" />. The perfect squares from here go: <img src="//latex.artofproblemsolving.com/4/0/a/40ad2f31a7b56decbf0a140d37b2758aad943f90.png" class="latex" alt="$2500,  2601, 2704, 2809\dots$" style="vertical-align: -3px" width="192" height="16" />. Note that the ones and tens also make the perfect squares, <img src="//latex.artofproblemsolving.com/0/9/3/093396cee8d231c8e28c1ef03ad9f0cdd5c14321.png" class="latex" alt="$1^2,2^2,3^2\dots$" style="vertical-align: -3px" width="88" height="18" />. After the ones and tens make <img src="//latex.artofproblemsolving.com/e/5/9/e59e2c6e83eb78cca610a5fd4070ae01c8d4ae60.png" class="latex" alt="$100$" style="vertical-align: 0px" width="26" height="13" />, the hundreds place will go up by <img src="//latex.artofproblemsolving.com/4/1/c/41c544263a265ff15498ee45f7392c5f86c6d151.png" class="latex" alt="$2$" width="8" height="12" />, thus reaching our goal. Since <img src="//latex.artofproblemsolving.com/b/1/4/b1421d715586fdca3f195bde54c1d482ab3bf016.png" class="latex" alt="$10^2=100$" style="vertical-align: 0px" width="76" height="15" />, the last perfect square to be written will be <img src="//latex.artofproblemsolving.com/1/5/2/152bb9161bb25147a2965485db4803ec32a5cfa0.png" class="latex" alt="$\left(50+10\right)^2=60^2=3600$" style="vertical-align: -4px" width="190" height="21" />. The missing number is one less than the number of hundreds <img src="//latex.artofproblemsolving.com/3/9/7/397865c53589236958c420223ccd4c5d1764d4d0.png" class="latex" alt="$(k=2)$" style="vertical-align: -4px" width="56" height="18" /> of <img src="//latex.artofproblemsolving.com/1/a/0/1a0518399f176a37b970186ebbe5411df1545fab.png" class="latex" alt="$3600$" width="35" height="12" />, or <img src="//latex.artofproblemsolving.com/8/c/7/8c7f6c79f2148f0cec592c9517b40ee1b82ef22e.png" class="latex" alt="$35$" width="17" height="12" />.
</p><p>Now consider <img src="//latex.artofproblemsolving.com/2/3/f/23f9241e830fb1c88bbaa9826478ab68f8c5f20a.png" class="latex" alt="$f(4)$" style="vertical-align: -4px" width="32" height="18" />. Instead of the difference between two squares needing to be <img src="//latex.artofproblemsolving.com/e/5/9/e59e2c6e83eb78cca610a5fd4070ae01c8d4ae60.png" class="latex" alt="$100$" style="vertical-align: 0px" width="26" height="13" />, the difference must now be <img src="//latex.artofproblemsolving.com/9/f/4/9f4f407fa86791b87ad5286ea377c10b2111d0f0.png" class="latex" alt="$10000$" style="vertical-align: 0px" width="44" height="13" />. This first happens at <img src="//latex.artofproblemsolving.com/4/a/0/4a0e59ed11438abcd12db5311698c101b310b2bb.png" class="latex" alt="$x\ge 5000$" style="vertical-align: -2px" width="70" height="15" />. After this point, similarly, <img src="//latex.artofproblemsolving.com/c/6/2/c626616f35144e87d7231c98f1109f959d0a4bcc.png" class="latex" alt="$\sqrt{10000}=100$" style="vertical-align: -1px" width="111" height="18" /> more numbers are needed to make the <img src="//latex.artofproblemsolving.com/e/d/9/ed99f78014bdf57b62e04864d28c977b06fb23ed.png" class="latex" alt="$10^4$" style="vertical-align: 0px" width="24" height="15" /> th's place go up by <img src="//latex.artofproblemsolving.com/4/1/c/41c544263a265ff15498ee45f7392c5f86c6d151.png" class="latex" alt="$2$" width="8" height="12" />. This will take place at <img src="//latex.artofproblemsolving.com/d/8/3/d83a5ee3a6ea0d20b6236b37cd84fc1f08b7c64d.png" class="latex" alt="$\left(5000+100\right)^2=5100^2= 26010000$" style="vertical-align: -4px" width="271" height="21" />. Removing the last four digits (the zeros) and subtracting one yields <img src="//latex.artofproblemsolving.com/5/9/2/592c1d4eacb3ec769d6ac9542733c10632610d91.png" class="latex" alt="$2600$" width="35" height="12" /> for the skipped value.
</p><p>In general, each new value of <img src="//latex.artofproblemsolving.com/3/9/6/3969c2e118c245223d0dc6d9bb67efad39c15ba6.png" class="latex" alt="$f(k+2)$" style="vertical-align: -4px" width="64" height="18" /> will add two digits to the "<img src="//latex.artofproblemsolving.com/7/9/0/79069377f91364c2f87a64e5f9f562a091c8a6c1.png" class="latex" alt="$5$" width="8" height="12" />" and one digit to the "<img src="//latex.artofproblemsolving.com/d/c/e/dce34f4dfb2406144304ad0d6106c5382ddd1446.png" class="latex" alt="$1$" style="vertical-align: 0px" width="8" height="12" />". This means that the last number Bernardo writes for <img src="//latex.artofproblemsolving.com/a/2/9/a295acb9662ee1bae4bb3aa92a1f42b2cfd83f10.png" class="latex" alt="$k=6$" width="43" height="12" /> is <img src="//latex.artofproblemsolving.com/4/f/1/4f1b4f0ae07b64d709d8e1b072811fc2e53fb5ca.png" class="latex" alt="$\left(500000+1000\right)^2$" style="vertical-align: -4px" width="133" height="21" />, the last for <img src="//latex.artofproblemsolving.com/9/8/0/9807ed176ecfd75ce05044e410875fb94d525520.png" class="latex" alt="$k = 8$" width="43" height="12" /> will be <img src="//latex.artofproblemsolving.com/f/0/8/f0877879b92fa5fe9881d015043b6a031faee8d3.png" class="latex" alt="$\left(50000000+10000\right)^2$" style="vertical-align: -4px" width="160" height="21" />, and so on until <img src="//latex.artofproblemsolving.com/3/3/9/339e1e3ea292fb2c9e8e5bf82775626657f70fd2.png" class="latex" alt="$k=2016$" style="vertical-align: 0px" width="70" height="13" />. Removing the last <img src="//latex.artofproblemsolving.com/8/c/3/8c325612684d41304b9751c175df7bcc0f61f64f.png" class="latex" alt="$k$" width="9" height="12" /> digits as Silvia does will be the same as removing <img src="//latex.artofproblemsolving.com/f/8/f/f8f7fd1dab6bb59aaf71a8f919812ba42cb7a243.png" class="latex" alt="$k/2$" style="vertical-align: -4px" width="27" height="18" /> trailing zeroes on the number to be squared. This means that the last number on the board for <img src="//latex.artofproblemsolving.com/a/2/9/a295acb9662ee1bae4bb3aa92a1f42b2cfd83f10.png" class="latex" alt="$k=6$" width="43" height="12" /> is <img src="//latex.artofproblemsolving.com/8/c/f/8cfaada19a02214dc102c2e53642cb1b467276da.png" class="latex" alt="$5001^2$" style="vertical-align: 0px" width="42" height="15" />, <img src="//latex.artofproblemsolving.com/7/7/e/77eb455e13266e46765af4d7b5506c4e3a6b314d.png" class="latex" alt="$k=8$" width="43" height="12" /> is <img src="//latex.artofproblemsolving.com/7/8/d/78dc204b4466cf7d00e1707457dd0423b3583dae.png" class="latex" alt="$50001^2$" style="vertical-align: 0px" width="51" height="15" />, and so on. So the first missing number is <img src="//latex.artofproblemsolving.com/d/0/8/d080caced439dc3b8327f564eb986a086b405342.png" class="latex" alt="$5001^2-1,50001^2-1\text{ etc.}$" style="vertical-align: -3px" width="198" height="18" /> The squaring will make a "<img src="//latex.artofproblemsolving.com/6/6/6/66644fd9f411299c3c1eabf151b5f601c9ef6c21.png" class="latex" alt="$25$" width="17" height="12" />" with two more digits than the last number, a "<img src="//latex.artofproblemsolving.com/f/c/6/fc606f7f1e530731ab4f1cc364c01dc64a4455ee.png" class="latex" alt="$10$" style="vertical-align: 0px" width="17" height="13" />" with one more digit, and a "<img src="//latex.artofproblemsolving.com/d/c/e/dce34f4dfb2406144304ad0d6106c5382ddd1446.png" class="latex" alt="$1$" style="vertical-align: 0px" width="8" height="12" />". The missing number is one less than that, so the "1" will be subtracted from <img src="//latex.artofproblemsolving.com/8/1/2/81232ecd8d9e4b5c0f24a00dabec238068f26de9.png" class="latex" alt="$f(k)$" style="vertical-align: -4px" width="33" height="18" />. In other words, <img src="//latex.artofproblemsolving.com/d/d/d/ddd1ea3b6d4b8a4576f550441d3de03172a8d0a8.png" class="latex" alt="$f(k) = 25\cdot 10^{k-2}+1\cdot 10^{k/2}$" style="vertical-align: -4px" width="217" height="20" />.
</p><p>Therefore:
</p><p><img src="//latex.artofproblemsolving.com/b/7/5/b75fc883a964965a8b3b703eb6f7a32f624c328e.png" class="latexcenter" alt="\[f(2) =35 =25 +10\]" width="158" height="18" />
<img src="//latex.artofproblemsolving.com/1/5/9/1595eff94336d67c550d79f8e60f9001d670d1c3.png" class="latexcenter" alt="\[f(4) =2600 =2500 +100\]" width="203" height="18" />
<img src="//latex.artofproblemsolving.com/4/9/a/49ab2b3276d70917faf65263760ffce56b044cdf.png" class="latexcenter" alt="\[f(6) =251000 =250000 +1000\]" width="248" height="18" />
<img src="//latex.artofproblemsolving.com/b/6/7/b67ccf4a5c49202b5aa01bb7394e8acef58f5943.png" class="latexcenter" alt="\[f(8) = 25010000 = 25000000 + 10000\]" width="294" height="18" />
</p><p>And so on. The sum <img src="//latex.artofproblemsolving.com/4/f/7/4f720910ddd69d3c62e5e61acd6815ce7ec79ef9.png" class="latex" alt="$f(2) + f(4) + f(6) +\dots + f(2016)$" style="vertical-align: -4px" width="271" height="18" /> is:
</p><p><img src="//latex.artofproblemsolving.com/b/b/d/bbd4fb5139881b0263779ee7ea97e2e33f9d3da1.png" class="latex" alt="$2.52525252525\dots 2525\cdot 10^{2015}$" style="vertical-align: 0px" width="234" height="15" /> + <img src="//latex.artofproblemsolving.com/c/8/a/c8a5415c488374ed313f54838aa237884da00466.png" class="latex" alt="$1.11111\dots 110\cdot 10^{1008}$" style="vertical-align: 0px" width="171" height="15" />, with <img src="//latex.artofproblemsolving.com/4/b/7/4b781fdf1cd172b567be38e2ffa6f20f0b8390c0.png" class="latex" alt="$2016$" style="vertical-align: 0px" width="35" height="13" /> repetitions each of "<img src="//latex.artofproblemsolving.com/6/6/6/66644fd9f411299c3c1eabf151b5f601c9ef6c21.png" class="latex" alt="$25$" width="17" height="12" />" and "<img src="//latex.artofproblemsolving.com/d/c/e/dce34f4dfb2406144304ad0d6106c5382ddd1446.png" class="latex" alt="$1$" style="vertical-align: 0px" width="8" height="12" />". 
There is no carrying in this addition. Therefore each <img src="//latex.artofproblemsolving.com/8/1/2/81232ecd8d9e4b5c0f24a00dabec238068f26de9.png" class="latex" alt="$f(k)$" style="vertical-align: -4px" width="33" height="18" /> adds <img src="//latex.artofproblemsolving.com/4/c/3/4c3df687e4f96485df33c255b3ba95d816dbf5f8.png" class="latex" alt="$2 + 5 + 1 = 8$" style="vertical-align: -1px" width="104" height="14" /> to the sum of the digits. 
Since <img src="//latex.artofproblemsolving.com/9/e/2/9e2bff9129119a0c54b3b70d77c55bae592382ce.png" class="latex" alt="$2n = 2016$" style="vertical-align: 0px" width="79" height="13" />, <img src="//latex.artofproblemsolving.com/9/d/b/9db269f79d365732338de5ce7c59885bb266d6b0.png" class="latex" alt="$n = 1008$" style="vertical-align: 0px" width="70" height="13" />, and <img src="//latex.artofproblemsolving.com/5/b/f/5bfaf8dd62b882e4699b75cf833d45ba6eb83ff0.png" class="latex" alt="$8n = 8064$" style="vertical-align: 0px" width="80" height="13" />, or <img src="//latex.artofproblemsolving.com/b/d/f/bdf2f848ec80200a0d1db7608ba3a873a51743d4.png" class="latex" alt="$\boxed{\textbf{(E)}\text{ 8064}}$" style="vertical-align: -10px" width="78" height="28" />.
</p>
